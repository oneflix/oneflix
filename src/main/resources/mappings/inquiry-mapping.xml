<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="InquiryDAO">

	<select id="getInquiry" parameterType="inquiry" resultType="inquiry">
		SELECT * FROM inquiry WHERE inquiry_id=#{inquiryId}
	</select>

	<resultMap type="inquiry" id="inquiryList">
		<id property="inquiryId" column="inquiry_id" />
		<result property="inquiryType" column="inquiry_type" />
		<result property="nick" column="nick" />
		<result property="memberEmail" column="member_email" />
		<result property="adminName" column="admin_name" />
		<result property="adminEmail" column="admin_email" />
		<result property="inquiryTitle" column="inquiry_title" />
		<result property="inquiryContent" column="inquiry_content" />
		<result property="emailTitle" column="email_title" />
		<result property="emailContent" column="email_content" />
		<result property="receiveDate" column="receive_date" />
		<result property="replyDate" column="reply_date" />
	</resultMap>

	<select id="getInquiryList" resultMap="inquiryList">
		SELECT * FROM inquiry
	</select>

	<insert id="insertInquiry" parameterType="inquiry">
		INSERT INTO inquiry (inquiry_id,inquiry_type,nick,member_email,
		inquiry_title,inquiry_content,recieve_date)
		VALUES((select nvl(max(inquiry_id),0)+1 from inquiry),#{inquiryType},#{nick},#{memberEmail},
		#{inquiryTitle},#{inquiryContent},sysdate)
	</insert>

	<update id="updateInquiry" parameterType="inquiry">
		UPDATE inquiry
		SET
		inquiry_type=#{inquiryType}, admin_name=#{adminName},admin_mail=#{adminMail},
		email_title=#{emailTitle},email_content=#{emailContent},reply_date=sysdate
		WHERE
		inquiry_id = #{inquiryId}
	</update>

	<delete id="deleteInquiry" parameterType="inquiry">
		DELETE FROM inquiry WHERE
		inquiry_id = #{inquiryId}
	</delete>

</mapper>
